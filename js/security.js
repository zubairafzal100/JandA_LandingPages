var Security=function(){var n=this,i,t=30;return n.init=function(){$.validator.setDefaults({ignore:null})},n.initSecurity=function(t,i,r,u,f,e){$(t).on("click",function(r){r.stopPropagation();r.preventDefault();n.stopCountdown(t);var u=$(r.target).data("username"),o=$("#resendAttempts").val(),s=$(e).val();$.ajax({type:"POST",data:{username:u,resendAttempts:o,authenticationType:f,memberPhone:s},url:i,success:function(i){$("#resendStatus").text(i.Message);i.ResendAttemptsLeft>0?n.startCountdown(t):($(t).hide(),$("#liveChatLink").show());$("#resendAttempts").val(i.ResendAttemptsLeft);$("#resendAttemptsText").text(i.ResendAttemptsLeft)},error:function(){}})});if(r&&$(r).length>0)$(r).on("click",function(n){n.stopPropagation();n.preventDefault();var t=$(n.target).data("username"),i=$("#resendAttempts").val();$.ajax({type:"GET",data:{username:t,resendAttempts:i},url:u,success:function(n){$("#popupContentRegister").html(n);app.initAjaxContent($("#popupContentRegister"));app.validateElement("#Phone","#popupContentRegister")},error:function(){}})})},n.startCountdown=function(r){var u=document.getElementById("seconds");u.innerHTML=t;$("#countdown").show();$(r).hide();i=setInterval(function(){n.countdown(r)},1e3)},n.countdown=function(n){if(t--,t>0){var i=document.getElementById("seconds");i.innerHTML=t}t<=0&&($("#countdown").hide(),$(n).show(),clearInterval(t))},n.stopCountdown=function(n){clearInterval(i);t=30;$("#countdown").hide();$(n).show()},n.disable2FAMethod=function(n,t,i,r,u,f,e,o){n.toLowerCase()=="true"&&$(t).css("pointer-events","none");i.toLowerCase()=="true"&&$(r).css("pointer-events","none");e.toLowerCase()=="true"&&$(o).css("pointer-events","none");u.toLowerCase()=="true"&&($(f).css("pointer-events","none"),$(f).addClass("disabled"))},n.printContent=function(n){var i=document.getElementById(n),t=window.open("","","toolbar=0,scrollbars=0,status=0");t.document.write(i.innerHTML);t.document.close();t.focus();t.print();t.close()},n.maskAuthenticationCode=function(n,t,i){$(n).mask("999 999 999");$(t).submit(function(){$(n).unmask()});$(i).each(function(){$(this).mask("999 999 999")})},n.configure2faSwitch=function(n,t,i,r){$(n).on("click",function(n){n.preventDefault();n.stopPropagation();$("#AuthenticationType").val("EmailAuthentication");var u=$(t).serialize(),f=i;$.ajax({url:f,method:"post",data:u,beforeSend:function(){app.showModalProgress($("button[type=submit]",t))},success:function(n){n&&$(r).html(n)},complete:function(){app.hideModalProgress($("button[type=submit]",t))}})})},n.redirect=function(n){n.RedirectToUrl&&(location.href=n.RedirectToUrl)},{init:n.init,initSecurity:n.initSecurity,startCountdown:n.startCountdown,stopCountdown:n.stopCountdown,disable2FAMethod:n.disable2FAMethod,printContent:n.printContent,maskAuthenticationCode:n.maskAuthenticationCode,configure2faSwitch:n.configure2faSwitch,redirect:n.redirect}}